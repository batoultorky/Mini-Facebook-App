
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@model miniFacebook.view_Models.HomeModel;
                         
@{
    foreach (var p in Model.allPost)
    {
       
        Applicationuser? user = Model.allUser.SingleOrDefault(s => s.Id == p.userId);
            <div class="oldPost" style="width:100%;">
                <div class="mb-2 d-flex justify-content-between">
                    <div class="usercontainer">
                        <img class="userphotopost" src="@user.photo" />
                        <h5 class="ms-3 mt-2 fs-5">@user.UserName</h5>
                    </div>
                    @{
                    DateTime now = DateTime.Now;
                        var timeDiff = now - p.date;
                        string timeAgo;
                        if (timeDiff.TotalDays >= 1)
                        {
                            timeAgo = $"{(int)timeDiff.TotalDays} day{(timeDiff.TotalDays >= 2 ? "s" : "")} ago";
                        }
                        else if (timeDiff.TotalHours >= 1)
                        {
                            timeAgo = $"{(int)timeDiff.TotalHours} hour{(timeDiff.TotalHours >= 2 ? "s" : "")} ago";
                        }
                        else if (timeDiff.TotalMinutes >= 1)
                        {
                            timeAgo = $"{(int)timeDiff.TotalMinutes} minute{(timeDiff.TotalMinutes >= 2 ? "s" : "")} ago";
                        }
                        else
                        {
                            timeAgo = "just now";
                        }
                    }
                    <p class="mt-3">@timeAgo</p>
                </div>
                <hr />
                <p>@p.body</p>
            </div>
        }
        }
                            